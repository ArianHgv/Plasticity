<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ฺฉุงูุดฺฏุฑ ุชุนุงูู ูุธุฑู ูุฏุงู ุฎุท ูุบุฒุด</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Warm Neutrals with Terracotta Accent -->
    <!-- Application Structure Plan: A thematic, single-page application with a sticky navigation header. The structure is designed for progressive learning: starting with fundamental concepts, moving to the core equations (Hencky), exploring boundary conditions with interactive sliders, and finally applying the knowledge in a "Case Studies" section that transforms the solved problems into interactive calculators and visualizations. This non-linear, thematic structure is chosen for better usability and understanding compared to a simple linear presentation of the source material. -->
    <!-- Visualization & Content Choices: 
        - Goal: Explain core concepts -> Viz: Interactive Mohr's Circle (Canvas) to show the relationship between p, k, and principal stresses.
        - Goal: Demonstrate Hencky's equations -> Viz: A simple animated diagram showing how pressure 'p' changes with slip-line angle 'phi' (HTML/JS).
        - Goal: Explore boundary conditions -> Viz: Interactive module with tabs. For Coulomb friction, a slider manipulates the friction coefficient 'ฮผ' to dynamically update the slip-line angle 'ฮธ', making the abstract formula tangible.
        - Goal: Apply knowledge (solved problems) -> Viz: Interactive calculators for indentation, extrusion, etc. (HTML Forms/JS) and a responsive line chart (Chart.js) for pressure vs. geometry ratio.
        - Justification: This blend of visualizations and interactive tools is chosen to actively engage the user, transforming reading into active learning that clarifies complex mechanical engineering principles.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            scroll-behavior: smooth;
        }
        .chart-container {
            position: relative;
            margin: auto;
            height: 40vh;
            max-height: 350px;
            width: 100%;
            max-width: 600px;
        }
        .section-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            border: 1px solid #e5e7eb;
        }
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: background-color 0.3s, color 0.3s;
            color: #4b5563;
        }
        .nav-link.active, .nav-link:hover {
            background-color: #f97316;
            color: white;
        }
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 50;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }
        h2 {
            font-size: 1.875rem;
            font-weight: 600;
            color: #1f2937;
            border-bottom: 2px solid #f97316;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #374151;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        .interactive-area {
            background-color: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
        }
        .formula {
            font-family: 'Times New Roman', serif;
            font-size: 1.1rem;
            color: #1e40af;
            background-color: #eff6ff;
            padding: 0.75rem;
            border-radius: 0.5rem;
            text-align: center;
            margin: 1rem 0;
            direction: ltr;
        }
        .icon {
            display: inline-block;
            width: 1.5rem;
            height: 1.5rem;
            margin-left: 0.5rem;
        }
    </style>
</head>
<body class="bg-stone-50 text-gray-800">

    <header class="text-center py-8 bg-white shadow-md">
        <h1 class="text-4xl font-bold text-gray-900">ฺฉุงูุดฺฏุฑ ุชุนุงูู ูุธุฑู ูุฏุงู ุฎุท ูุบุฒุด</h1>
        <p class="text-lg text-gray-600 mt-2">ุงุจุฒุงุฑ ุจุฑุง ุฏุฑฺฉ ุจูุชุฑ ููุงูู ุชุบุฑ ุดฺฉู ูพูุงุณุชฺฉ ุฏุฑ ููุฒุงุช</p>
    </header>

    <nav class="sticky-nav shadow-sm mb-8 py-3">
        <div class="container mx-auto max-w-5xl flex justify-center items-center space-x-4 space-x-reverse">
            <a href="#concepts" class="nav-link">ููุงูู ูพุงู</a>
            <a href="#hencky" class="nav-link">ูุนุงุฏูุงุช ููฺฉ</a>
            <a href="#boundaries" class="nav-link">ุดุฑุงุท ูุฑุฒ</a>
            <a href="#applications" class="nav-link">ฺฉุงุฑุจุฑุฏูุง ู ูุณุงุฆู</a>
        </div>
    </nav>

    <main class="container mx-auto max-w-5xl px-4">
        
        <section id="concepts" class="section-card">
            <h2>
                <span class="icon">โ๏ธ</span>
                ููุงูู ูพุงู
            </h2>
            <p class="text-lg leading-relaxed">ูุธุฑู ูุฏุงู ุฎุท ูุบุฒุด ฺฉ ุงุจุฒุงุฑ ุชุญูู ูุฏุฑุชููุฏ ุจุฑุง ุจุฑุฑุณ ูุฑุขูุฏูุง ุชุบุฑ ุดฺฉู ูพูุงุณุชฺฉ ุฏุฑ ุดุฑุงุท ฺฉุฑูุด-ุตูุญู ุงุณุช. ุงู ูุธุฑู ุจู ูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ูุฑููุง ูุงุฒู ุจุฑุง ุดฺฉูโุฏู ููุฒุงุชุ ุงูฺฏู ุฌุฑุงู ูุงุฏู ู ุชุฃุซุฑ ุนูุงูู ูุงููุฏ ุงุตุทฺฉุงฺฉ ุฑุง ุฏุฑฺฉ ฺฉูู. ุงุณุงุณ ุงู ูุธุฑู ุจุฑ ุงู ุงุณุช ฺฉู ุฌุฑุงู ูพูุงุณุชฺฉ ฺฉ ูุฑุขูุฏ ุจุฑุด ุงุณุช ู ุฏุฑ ุฌูุชโูุง ุฑุฎ ูโุฏูุฏ ฺฉู ุชูุด ุจุฑุด ุจู ุญุฏุงฺฉุซุฑ ููุฏุงุฑ ุฎูุฏ ูโุฑุณุฏ. ุฏุฑ ุงู ุจุฎุดุ ุจุง ููุงูู ฺฉูุฏ ุงู ูุธุฑู ุขุดูุง ูโุดูู.</p>
            
            <div class="interactive-area">
                <h3>ุฏุงุฑู ููุฑ ุชุนุงูู ุจุฑุง ฺฉุฑูุด-ุตูุญู</h3>
                <p class="mb-4">ุฏุงุฑู ููุฑ ูุถุนุช ุชูุด ุฏุฑ ฺฉ ููุทู ุฑุง ูุดุงู ูโุฏูุฏ. ุฏุฑ ุญุงูุช ฺฉุฑูุด-ุตูุญู ูพูุงุณุชฺฉุ ุดุนุงุน ุฏุงุฑู ุจุฑุงุจุฑ ุจุง ุชูุด ุชุณูู ุจุฑุด ($k$) ุงุณุช. ูุดุงุฑ ูุฏุฑูุงุณุชุงุชฺฉ ($p$) ูุฑฺฉุฒ ุฏุงุฑู ุฑุง ุฑู ูุญูุฑ ุงูู ุฌุงุจุฌุง ูโฺฉูุฏ. ุจุง ุญุฑฺฉุช ุฏุงุฏู ุงุณูุงุฏุฑ ุฒุฑุ ุจุจูุฏ ฺฺฏููู ุชุบุฑ ูุดุงุฑ ูุฏุฑูุงุณุชุงุชฺฉุ ุชูุดโูุง ุงุตู ($\sigma_1, \sigma_3$) ุฑุง ุชุบุฑ ูโุฏูุฏุ ุฏุฑ ุญุงู ฺฉู ุดุนุงุน ($k$) ุซุงุจุช ูโูุงูุฏ.</p>
                <canvas id="mohrCircleCanvas" width="500" height="300"></canvas>
                <div class="mt-4">
                    <label for="hydrostaticPressure" class="block mb-2 font-medium">ูุดุงุฑ ูุฏุฑูุงุณุชุงุชฺฉ (p):</label>
                    <input type="range" id="hydrostaticPressure" min="-400" max="400" value="100" class="w-full">
                    <div class="flex justify-between text-sm mt-1">
                        <span>ูุดุงุฑ</span>
                        <span>ฺฉุดุด</span>
                    </div>
                </div>
                <div id="mohrOutputs" class="mt-4 p-4 bg-white rounded-md border text-center font-mono"></div>
            </div>
        </section>

        <section id="hencky" class="section-card">
            <h2>
                <span class="icon">๐</span>
                ูุนุงุฏูุงุช ููฺฉ
            </h2>
            <p class="text-lg leading-relaxed">ูุนุงุฏูุงุช ููฺฉ ููุจ ุชูพูุฏู ุชุญูู ูุฏุงู ุฎุท ูุบุฒุด ูุณุชูุฏ. ุงู ูุนุงุฏูุงุช ุฑุงุจุทู ุจู ูุดุงุฑ ูุฏุฑูุงุณุชุงุชฺฉ ($p$) ู ฺุฑุฎุด ุฎุทูุท ูุบุฒุด ($\phi$) ุฑุง ุจุงู ูโฺฉููุฏ. ุจู ุทูุฑ ุฎูุงุตูุ ุงู ูุนุงุฏูุงุช ูโฺฏููุฏ ฺฉู ุจุง ุญุฑฺฉุช ุฏุฑ ุงูุชุฏุงุฏ ฺฉ ุฎุท ูุบุฒุดุ ุชุบุฑ ุฏุฑ ูุดุงุฑ ูุฏุฑูุงุณุชุงุชฺฉ ูุณุชููุงู ุจุง ุชุบุฑ ุฏุฑ ุฒุงูู ุขู ุฎุท ูุบุฒุด ูุฑุชุจุท ุงุณุช.</p>
            <div class="formula">p ยฑ 2kฯ = constant</div>
            <p>ุงู ุฑุงุจุทู ุจู ูุง ุงุฌุงุฒู ูโุฏูุฏ ุจุง ุฏุงูุณุชู ุดุฑุงุท ุฏุฑ ฺฉ ููุทู ุงุฒ ูุฏุงูุ ูุถุนุช ุชูุด ุฑุง ุฏุฑ ููุงุท ุฏฺฏุฑ ูพุดโุจู ฺฉูู.</p>

            <div class="interactive-area">
                <h3>ูุถู ุงูู ููฺฉ</h3>
                <p class="mb-4">ูุถู ุงูู ููฺฉ ุจุงู ูโฺฉูุฏ ฺฉู ุฒุงูู ุจู ุฏู ุฎุท ูุบุฒุด ุงุฒ ฺฉ ุฎุงููุงุฏูุ ุฏุฑ ุฌุง ฺฉู ุชูุณุท ฺฉ ุฎุท ูุบุฒุด ุงุฒ ุฎุงููุงุฏู ุฏฺฏุฑ ูุทุน ูโุดููุฏุ ุฏุฑ ุทูู ุขู ุฎุท ูุบุฒุด ุซุงุจุช ูโูุงูุฏ. ุงู ูฺฺฏ ุจุฑุง ุชุฑุณู ุฏูู ูุฏุงูโูุง ุฎุท ูุบุฒุด ุจุณุงุฑ ุญุงุช ุงุณุช.</p>
                <div class="p-4 bg-white rounded-md border text-center">
                    <p class="font-bold text-lg">ฯ<sub>Q</sub> - ฯ<sub>P</sub> = ฯ<sub>B</sub> - ฯ<sub>A</sub></p>
                    <p class="text-sm text-gray-600 mt-2">ุงู ุฑุงุจุทู ูุดุงู ูโุฏูุฏ ฺฉู ุชุบุฑ ุฒุงูู ุฏุฑ ุงูุชุฏุงุฏ ฺฉ ุฎุท ุจุชุง (ูุซูุงู ุงุฒ A ุจู B) ุจุง ุชุบุฑ ุฒุงูู ุฏุฑ ุงูุชุฏุงุฏ ุฎุท ุจุชุง ุฏฺฏุฑ (ุงุฒ P ุจู Q) ุจุฑุงุจุฑ ุงุณุช.</p>
                </div>
            </div>
        </section>

        <section id="boundaries" class="section-card">
            <h2>
                <span class="icon">๐ฆ</span>
                ุดุฑุงุท ูุฑุฒ: ุฑูุชุงุฑ ููุฒ ุฏุฑ ูุจูโูุง
            </h2>
            <p class="text-lg leading-relaxed">ูุญูู ุจุฑุฎูุฑุฏ ุฎุทูุท ูุบุฒุด ุจุง ูุฑุฒูุง ูุงุฏู (ูุงููุฏ ุณุทุญ ุขุฒุงุฏ ุง ุณุทุญ ุชูุงุณ ุจุง ุงุจุฒุงุฑ) ฺฉ ุงุฒ ูููโุชุฑู ุฌูุจูโูุง ุชุญูู ุงุณุช. ุดุฑุงุท ูุฑุฒุ ุดฺฉู ฺฉู ูุฏุงู ุฎุท ูุบุฒุด ู ุฏุฑ ูุชุฌู ูุดุงุฑ ู ูุฑู ูุงุฒู ุจุฑุง ูุฑุขูุฏ ุฑุง ุชุนู ูโฺฉููุฏ. ุฏุฑ ุงู ุจุฎุดุ ุดุฑุงุท ูุฑุฒ ูุฎุชูู ุฑุง ุจู ุตูุฑุช ุชุนุงูู ุจุฑุฑุณ ูโฺฉูู.</p>
            
            <div class="interactive-area">
                 <h3>ฺฉุงูุดฺฏุฑ ุดุฑุงุท ูุฑุฒ</h3>
                 <p class="mb-4">ุจุง ุงูุชุฎุงุจ ูุฑ ุญุงูุชุ ุจุจูุฏ ุฎุทูุท ูุบุฒุด ฺฺฏููู ุจุง ุณุทุญ ุชูุงุณ ุฑูุชุงุฑ ูโฺฉููุฏ. ุจุฑุง ุญุงูุช ุงุตุทฺฉุงฺฉ ฺฉูููุ ูโุชูุงูุฏ ุถุฑุจ ุงุตุทุญฺฉุงฺฉ ุฑุง ุชุบุฑ ุฏูุฏ ู ุชุฃุซุฑ ุขู ุฑุง ุจุฑ ุฒุงูู ุฎุท ูุบุฒุด ูุดุงูุฏู ฺฉูุฏ.</p>
                 <div id="boundaryConditionVisual" class="w-full h-48 bg-gray-200 rounded-md flex items-center justify-center relative overflow-hidden mb-4">
                     <div class="absolute bottom-0 left-0 w-full h-1/3 bg-gray-700" id="toolSurface">
                        <span class="text-white absolute bottom-2 right-2 text-sm">ุงุจุฒุงุฑ/ูุงูุจ</span>
                     </div>
                      <div class="absolute bottom-1/3 right-1/2 w-48 h-24 transform origin-bottom-left" id="slipLineContainer">
                         <div class="w-full h-px bg-red-500 absolute top-1/2 left-0 transform -translate-y-1/2" id="slipLineAlpha"></div>
                         <div class="h-full w-px bg-blue-500 absolute left-1/2 top-0 transform -translate-x-1/2" id="slipLineBeta"></div>
                     </div>
                     <span id="angleText" class="absolute top-4 right-4 text-lg font-bold"></span>
                 </div>

                 <div class="flex flex-wrap gap-2 justify-center mb-4">
                    <button class="nav-link boundary-btn" data-type="frictionless" onclick="updateBoundary('frictionless')">ุจุฏูู ุงุตุทฺฉุงฺฉ</button>
                    <button class="nav-link boundary-btn" data-type="sticking" onclick="updateBoundary('sticking')">ุงุตุทฺฉุงฺฉ ฺุณุจูุฏู</button>
                    <button class="nav-link boundary-btn" data-type="coulomb" onclick="updateBoundary('coulomb')">ุงุตุทฺฉุงฺฉ ฺฉููู</button>
                 </div>
                 <div id="coulombSliderContainer" class="hidden mt-4">
                    <label for="frictionCoeff" class="block mb-2 font-medium">ุถุฑุจ ุงุตุทฺฉุงฺฉ (ฮผ): <span id="muValue">0.1</span></label>
                    <input type="range" id="frictionCoeff" min="0" max="0.5" step="0.01" value="0.1" class="w-full">
                 </div>
            </div>
        </section>

        <section id="applications" class="section-card">
            <h2>
                <span class="icon">๐ง</span>
                ฺฉุงุฑุจุฑุฏูุง ู ูุณุงุฆู ุญู ุดุฏู
            </h2>
            <p class="text-lg leading-relaxed">ูุธุฑู ูุฏุงู ุฎุท ูุบุฒุด ู ุฑุงูโุญูโูุง ฺฉุฑุงู ุจุงูุงุ ฺฉุงุฑุจุฑุฏูุง ุนูู ูุฑุงูุงู ุฏุฑ ูููุฏุณ ูุฑุขูุฏูุง ููุฒฺฉุงุฑ ุฏุงุฑูุฏ. ุฏุฑ ุงู ุจุฎุดุ ุจุฑุฎ ุงุฒ ูุณุงุฆู ฺฉูุงุณฺฉ ูุงููุฏ ูุฑูุฑูุชฺฏุ ุงฺฉุณุชุฑูฺู ู ฺฉุดุด ููุงุฑ ุฑุง ุจู ุตูุฑุช ุชุนุงูู ุจุฑุฑุณ ูโฺฉูู ู ุงุฒ ุฑูุงุจุท ฺฉู ุงุฏ ฺฏุฑูุชู ุจุฑุง ูุญุงุณุจู ูุฑููุง ู ูุดุงุฑูุง ุงุณุชูุงุฏู ูโฺฉูู.</p>
            
            <div class="interactive-area mt-6">
                <h3>ูุญุงุณุจูโฺฏุฑ ูุดุงุฑ ูุฑูุฑูุชฺฏ (Indentation)</h3>
                <p class="mb-4">ุจุฑุง ูุฑูุฑูุชฺฏ ฺฉ ูพุงูฺ ุชุฎุช ุฏุฑ ฺฉ ุจููฺฉ ุจุณุงุฑ ุถุฎูุ ูุดุงุฑ ูุงุฒู ุจู ุฏูู ูุญุฏูุฏุชโูุง ููุฏุณ ุงูุฒุงุด ูโุงุจุฏ. ุงู ูุดุงุฑ ุจุง ุฑุงุจุทู $P/2k = 1 + \pi/2 \approx 2.57$ ุฏุงุฏู ูโุดูุฏ. ุจุง ูุงุฑุฏ ฺฉุฑุฏู ุชูุด ุชุณูู ($S=2k$)ุ ูุดุงุฑ ูุฑูุฑูุชฺฏ ุฑุง ูุญุงุณุจู ฺฉูุฏ.</p>
                <div class="flex flex-col sm:flex-row gap-4 items-center">
                    <div class="flex-1 w-full">
                        <label for="s_indent" class="block mb-1 font-medium">ุชูุด ุชุณูู (S) (N/mmยฒ):</label>
                        <input type="number" id="s_indent" value="150" class="w-full p-2 border rounded-md">
                    </div>
                    <button onclick="calculateIndentation()" class="bg-orange-500 text-white px-6 py-2 rounded-md hover:bg-orange-600 transition-colors w-full sm:w-auto mt-4 sm:mt-0">ูุญุงุณุจู</button>
                    <div id="indentationResult" class="flex-1 w-full p-4 bg-white rounded-md border text-center font-bold text-lg">---</div>
                </div>
            </div>
            
            <div class="interactive-area mt-6">
                <h3>ุชุฃุซุฑ ููุฏุณู ุจุฑ ูุดุงุฑ ูุฑูุฑูุชฺฏ</h3>
                <p class="mb-4">ูุดุงุฑ ูุฑูุฑูุชฺฏ ุจู ูุณุจุช ุถุฎุงูุช ููุงุฑ ุจู ุนุฑุถ ูพุงูฺ ($h/b$) ุจุณุชฺฏ ุฏุงุฑุฏ. ูููุฏุงุฑ ุฒุฑ ูุดุงู ูโุฏูุฏ ฺฉู ฺฺฏููู ูุดุงุฑ ูุฑูุงูุงุฒ ุดุฏู ($P/2k$) ุจุง ุชุบุฑ ุงู ูุณุจุช ุชุบุฑ ูโฺฉูุฏ. ุงู ูููุฏุงุฑ ุจุฑ ุงุณุงุณ ุฏุงุฏูโูุง ุชุฌุฑุจ ู ูพุดโุจูโูุง ูุธุฑู ูุฏุงู ุฎุท ูุบุฒุด ุงุณุช.</p>
                <div class="chart-container">
                    <canvas id="pressureRatioChart"></canvas>
                </div>
            </div>
            
             <div class="interactive-area mt-6">
                <h3>ูุญุงุณุจูโฺฏุฑ ูุดุงุฑ ุงฺฉุณุชุฑูฺู</h3>
                <p class="mb-4">ุจุฑุง ุงฺฉุณุชุฑูฺูุ ูโุชูุงู ุงุฒ ูุฑูููโูุง ุชูุฑุจ ูุจุชู ุจุฑ ฺฉุงุฑ ููฺฏู ู ฺฉุงุฑ ุงุถุงู ุงุณุชูุงุฏู ฺฉุฑุฏ. ูุนุงุฏูู ุฒุฑ ฺฉ ุชูุฑุจ ุฑุงุฌ ุจุฑุง ูุดุงุฑ ุงฺฉุณุชุฑูฺู ($P$) ุจุฑ ุงุณุงุณ ุชูุด ุชุณูู ($Y$) ู ูุณุจุช ุงฺฉุณุชุฑูฺู ($A_1/A_2$) ุงุณุช.</p>
                <div class="formula">P/Y = 0.8 + 1.5 * ln(A<sub>1</sub>/A<sub>2</sub>)</div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 items-center">
                    <div>
                         <label for="y_extrude" class="block mb-1 font-medium">ุชูุด ุชุณูู (Y) (N/mmยฒ):</label>
                        <input type="number" id="y_extrude" value="250" class="w-full p-2 border rounded-md mb-2">
                        <label for="ratio_extrude" class="block mb-1 font-medium">ูุณุจุช ุงฺฉุณุชุฑูฺู (Aโ/Aโ):</label>
                        <input type="number" id="ratio_extrude" value="14.7" class="w-full p-2 border rounded-md">
                    </div>
                    <div>
                        <button onclick="calculateExtrusion()" class="bg-orange-500 text-white px-6 py-2 rounded-md hover:bg-orange-600 transition-colors w-full mb-2">ูุญุงุณุจู ูุดุงุฑ</button>
                        <div id="extrusionResult" class="p-4 bg-white rounded-md border text-center font-bold text-lg">---</div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center py-6 mt-12 bg-gray-800 text-white">
        <p>ุงู ุงูพูฺฉุดู ุชุนุงูู ุจุฑ ุงุณุงุณ ุฎูุงุตู ุณูุงูุงุช ู ูพุงุณุฎโูุง ฺฉุชุงุจ ุฏุฑุณ ุทุฑุงุญ ุดุฏู ุงุณุช.</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        
        // --- Mohr's Circle ---
        const mohrCanvas = document.getElementById('mohrCircleCanvas');
        const pressureSlider = document.getElementById('hydrostaticPressure');
        const mohrOutputs = document.getElementById('mohrOutputs');
        const ctx = mohrCanvas.getContext('2d');
        const k = 100; // Shear yield stress, constant radius
        
        function drawMohrCircle() {
            const p = -parseFloat(pressureSlider.value); // Negative for compressive, as per convention
            const centerX = mohrCanvas.width / 2 + p;
            const centerY = mohrCanvas.height / 2;
            const radius = k;

            // Clear canvas
            ctx.clearRect(0, 0, mohrCanvas.width, mohrCanvas.height);

            // Draw axes
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(mohrCanvas.width, centerY); // sigma-axis
            ctx.moveTo(mohrCanvas.width / 2, 0);
            ctx.lineTo(mohrCanvas.width / 2, mohrCanvas.height); // tau-axis
            ctx.strokeStyle = '#9ca3af';
            ctx.stroke();

            // Draw Mohr's circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.strokeStyle = '#f97316';
            ctx.lineWidth = 2;
            ctx.stroke();
            ctx.fillStyle = 'rgba(249, 115, 22, 0.1)';
            ctx.fill();

            // Draw center, sigma1, sigma3 points
            const sigma1 = p + radius;
            const sigma3 = p - radius;
            
            ctx.beginPath();
            ctx.arc(centerX, centerY, 4, 0, 2 * Math.PI); // Center
            ctx.fillStyle = '#1f2937';
            ctx.fill();

            ctx.beginPath();
            ctx.arc(centerX + radius, centerY, 4, 0, 2 * Math.PI); // sigma1
            ctx.fill();

            ctx.beginPath();
            ctx.arc(centerX - radius, centerY, 4, 0, 2 * Math.PI); // sigma3
            ctx.fill();
            
            // Labels
            ctx.font = '12px Vazirmatn';
            ctx.fillStyle = '#1f2937';
            ctx.textAlign = 'center';
            ctx.fillText('ฯ', mohrCanvas.width - 10, centerY - 10);
            ctx.fillText('ฯ', mohrCanvas.width/2 + 10, 15);
            ctx.fillText('p = ' + (-p).toFixed(0), centerX, centerY - radius - 10);
            ctx.fillText('ฯโ', centerX + radius, centerY + 20);
            ctx.fillText('ฯโ', centerX - radius, centerY + 20);
            
            mohrOutputs.innerHTML = `
                p = ${(-p).toFixed(0)} | 
                k = ${k} | 
                ฯโ = ${(-p + k).toFixed(0)} | 
                ฯโ = ${(-p - k).toFixed(0)}
            `;
        }
        
        pressureSlider.addEventListener('input', drawMohrCircle);
        drawMohrCircle();
        
        // --- Boundary Conditions ---
        window.updateBoundary = function(type) {
            const container = document.getElementById('slipLineContainer');
            const angleText = document.getElementById('angleText');
            const coulombSliderContainer = document.getElementById('coulombSliderContainer');
            const frictionCoeffInput = document.getElementById('frictionCoeff');
            const muValueSpan = document.getElementById('muValue');

            // Deactivate all boundary buttons first
            document.querySelectorAll('.boundary-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Activate the clicked button
            const activeButton = document.querySelector(`.boundary-btn[data-type="${type}"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }

            if (coulombSliderContainer) {
                coulombSliderContainer.classList.add('hidden');
            }

            let angle = 45; // Default for frictionless

            if (type === 'sticking') {
                angle = 0;
            } else if (type === 'coulomb') {
                if (coulombSliderContainer) {
                    coulombSliderContainer.classList.remove('hidden');
                }
                if (frictionCoeffInput && muValueSpan) {
                    const mu = parseFloat(frictionCoeffInput.value);
                    muValueSpan.textContent = mu.toFixed(2); // Update displayed mu value
                    const cos2theta = Math.min(mu * 2, 1);
                    angle = (Math.acos(cos2theta) * 180 / Math.PI) / 2;
                }
            }

            if (container) {
                container.style.transform = `rotate(${angle}deg)`;
            }
            if (angleText) {
                angleText.textContent = `${angle.toFixed(1)}ยฐ`;
            }
        };
        
        const frictionSlider = document.getElementById('frictionCoeff');
        const muValueSpan = document.getElementById('muValue');
        if (frictionSlider) {
            frictionSlider.addEventListener('input', () => {
                if (muValueSpan) {
                    muValueSpan.textContent = frictionSlider.value;
                }
                updateBoundary('coulomb');
            });
        }
        updateBoundary('frictionless');


        // --- Pressure Ratio Chart ---
        const pressureChartCanvas = document.getElementById('pressureRatioChart');
        const h_b_values = [0.1, 0.25, 0.5, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 8.0, 10.0];
        const P_2k_values = [1.04, 1.02, 1.01, 1.0, 1.15, 1.4, 1.7, 2.0, 2.2, 2.45, 2.57];
        new Chart(pressureChartCanvas, {
            type: 'line',
            data: {
                labels: h_b_values.map(v => v.toString()),
                datasets: [{
                    label: 'ูุดุงุฑ ูุฑูุงูุงุฒ ุดุฏู (P/2k)',
                    data: P_2k_values,
                    borderColor: '#f97316',
                    backgroundColor: 'rgba(249, 115, 22, 0.2)',
                    fill: true,
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'ูุณุจุช ุถุฎุงูุช ุจู ุนุฑุถ (h/b)'
                        }
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'P/2k'
                        },
                        beginAtZero: false,
                        suggestedMin: 1.0
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'ุชุบุฑุงุช ูุดุงุฑ ูุฑูุฑูุชฺฏ ุจุง ููุฏุณู'
                        }
                    }
                }
        });
        
        // --- Calculators ---
        window.calculateIndentation = function() {
            const s = parseFloat(document.getElementById('s_indent').value);
            const resultDiv = document.getElementById('indentationResult');
            if (isNaN(s) || s <= 0) {
                resultDiv.textContent = 'ููุฏุงุฑ ูุงูุนุชุจุฑ';
                return;
            }
            const two_k = s;
            const pressure = 2.57 * two_k;
            resultDiv.textContent = `P โ ${pressure.toFixed(2)} N/mmยฒ`;
        };
        
        window.calculateExtrusion = function() {
            const y = parseFloat(document.getElementById('y_extrude').value);
            const ratio = parseFloat(document.getElementById('ratio_extrude').value);
            const resultDiv = document.getElementById('extrusionResult');
            if (isNaN(y) || isNaN(ratio) || y <= 0 || ratio <= 1) {
                 resultDiv.textContent = 'ููุงุฏุฑ ูุงูุนุชุจุฑ';
                return;
            }
            const pressure_ratio = 0.8 + 1.5 * Math.log(ratio);
            const pressure = pressure_ratio * y;
            resultDiv.textContent = `P โ ${pressure.toFixed(2)} N/mmยฒ`;
        };

        // --- Navigaion Scroll ---
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

    });
    </script>

</body>
</html>